"use strict";angular.module("fileInput",[]),angular.module("fileInput").directive("fileInputButton",["$parse","fileReader",function(a,b){return{restrict:"EA",link:function(c,d,e){var f=angular.element(d),g=angular.element('<input type="file" />');f.append(g);var h=a(e.onFileLoad);g.on("change",function(a){b.readAsText((a.srcElement||a.target).files[0],c).then(function(a){h(c,{file:a})})})}}}]);var fileReader=function(a){var b=function(a,b,c){return function(){c.$apply(function(){b.resolve(a.result)})}},c=function(a,b,c){return function(){c.$apply(function(){b.reject(a.result)})}},d=function(a,b){return function(a){b.$broadcast("fileProgress",{total:a.total,loaded:a.loaded})}},e=function(a,e){var f=new FileReader;return f.onload=b(f,a,e),f.onerror=c(f,a,e),f.onprogress=d(f,e),f},f=function(b,c){var d=a.defer(),f=e(d,c);return f.readAsText(b),d.promise};return{readAsText:f}};angular.module("fileInput").factory("fileReader",["$q",fileReader]);